"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8260],{5437:(t,e,i)=>{function a(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a={style:"currency",currency:e};return!0===i&&(a={...a,minimumFractionDigits:0,maximumFractionDigits:0}),e&&e.length>0?Number(t).toLocaleString(document.documentElement.lang,a):""}i.d(e,{Z:()=>a})},41730:(t,e,i)=>{i.d(e,{Z:()=>r});var a=i(19017),n=i(28578),o=i(92177),s=i.n(o);const r=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,n.Z)(t)&&(0,n.Z)(e)){if(!window.productRecommenderAccessKey)return void a.Z.error("Product Recommender: missing Access_Key!");const r={tenant:"pixart",token:window.productRecommenderAccessKey,recommendationId:e,action:t};(0,n.Z)(i)&&(r.item_id=i),o&&(r.item_price=o),a.Z.log("Product Recommender: sending ".concat(t.toUpperCase()," metrics to service")),s().updateMetric(r,window.devEnv).catch((t=>{a.Z.error("Product Recommender: errors on UpdateMetrics library function!",t)}))}else a.Z.error("Product Recommender: unable to send metrics 'cause Action or RecommendationId are empty!")}},11418:(t,e,i)=>{i.d(e,{Z:()=>c});var a=i(2991),n=i.n(a),o=i(66024),s=i(98271),r=i(93628),l=i(89872),d=i(58809);const c=t=>{const e=(0,l.Z)(t);return n()(e).call(e,(e=>{const i=t[e],a=i.label.en,n=(0,o.Z)(i),l=(0,s.Z)(i);let c;if(""!==l){const t=(0,d.Z)(i,l);c=void 0!==t?(0,r.Z)(t):l}return{attribute:a,label:n,option:{value:l,label:c}}}))}},66024:(t,e,i)=>{i.d(e,{Z:()=>a});const a=t=>{var e,i,a,n;const o=null==t||null===(e=t.customSelections)||void 0===e||null===(i=e.dictionaryTranslations)||void 0===i?void 0:i.voice,s=null==t||null===(a=t.label)||void 0===a?void 0:a.en;return null!==(n=null!=o?o:s)&&void 0!==n?n:""}},51486:(t,e,i)=>{i.d(e,{Z:()=>d});var a=i(78914),n=i.n(a),o=i(98926),s=i.n(o),r=i(31238),l=i.n(r);const d=t=>{let e=null,i=null;return t.length>0&&n()(t).call(t,(t=>{const a=null!=t&&t.increment&&!s()(l()(t.increment))?l()(t.increment):0,n=null!=t&&t.minimum&&!s()(l()(t.minimum))?l()(t.minimum):a,o=null!=t&&t.maximum&&!s()(l()(t.maximum))?l()(t.maximum):null;(null===e||n<e)&&(e=n),(null===i||null!==o&&o>i)&&(i=o)})),{minLimit:e,maxLimit:i}}},93628:(t,e,i)=>{i.d(e,{Z:()=>a});const a=t=>{var e,i,a,n;const o=null==t||null===(e=t.customSelections)||void 0===e||null===(i=e.dictionaryTranslations)||void 0===i?void 0:i.voice,s=null==t||null===(a=t.label)||void 0===a?void 0:a.en;return null!==(n=null!=o?o:s)&&void 0!==n?n:""}},11914:(t,e,i)=>{i.d(e,{Z:()=>u});var a=i(32366),n=i.n(a),o=i(47302),s=i.n(o),r=i(86902),l=i.n(r),d=i(89350);const c=(t,e,i)=>{if(!e)return;const a=n()(e).call(e,((t,e)=>t&&t[e]),t);return void 0===a?i:a},u=(t,e)=>{var i;return s()(i=l()(t)).call(i,((i,a)=>{const n=c(null==t?void 0:t[i],e),o=c(null==t?void 0:t[a],e),s=(0,d.Z)(null!=n?n:"0");return(0,d.Z)(null!=o?o:"0")-s}))}},89872:(t,e,i)=>{i.d(e,{Z:()=>l});var a=i(20116),n=i.n(a),o=i(86902),s=i.n(o),r=i(69505);const l=t=>{var e;return n()(e=s()(t)).call(e,(e=>{const i=t[e];return!(0,r.Z)(i)}))}},37738:(t,e,i)=>{i.d(e,{Z:()=>g});var a=i(2991),n=i.n(a),o=i(41511),s=i.n(o),r=i(20116),l=i.n(r),d=i(83193),c=i(3271),u=i(89350),h=i(92177),p=i.n(h),m=i(19017);const v=t=>{if((0,c.Z)(t))return null;return n()(t).call(t,(t=>t.merchantInfo.pageId)).join(",")},g=async function(t,e,i,a){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,g=arguments.length>9?arguments[9]:void 0,y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"PUBLISHED",f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null;if(!window.productRecommenderAccessKey)return m.Z.error("Product Recommender: missing Access_Key!"),null;const D=d.Z.getters["user/userCustomerNumber"],P=d.Z.getters["cart/lineItems"],S=window.domainLocale,C={customerId:D,anonymousId:t,productsOnPage:(null!=i?i:[""]).join(","),productsInCart:v(P),tenant:"pixart",lob:S,channels:"Website",locations:e,locale:S,placementStates:y,upSell:void 0},I={token:window.productRecommenderAccessKey};n&&(C.upSell={selection:{itemId:a,quantity:(0,u.Z)(o),taxRate:h,productionTime:r.toString(),deliveryOption:c},pricingPayload:g});try{const t=await p().getRecommendations(C,I,!1);if(t&&"Success"===t.status&&s()(t.placements)&&t.placements.length>0){var k;const e=l()(k=t.placements).call(k,(t=>n?"upsell"==t.setup.type:"upsell"!=t.setup.type));if(f){const t=l()(e).call(e,(t=>t.setup.name==f));if(t&&t.length>0)return t[0]}return e[0]}m.Z.error("Product Recommender: Unable to obtain correct response from the service!")}catch(t){m.Z.error("Product Recommender: Exception caught retrieving data from the service!"),m.Z.error(t)}return null}},90891:(t,e,i)=>{i.d(e,{Z:()=>o});var a=i(33032),n=i.n(a);const o=(t,e,i)=>{let a;return function(){for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];const l=this;clearTimeout(a),a=n()((()=>{a=null,i||t.apply(l,s)}),e),i&&!a&&t.apply(l,s)}}},64781:(t,e,i)=>{i.d(e,{Z:()=>a});const a=t=>"string"==typeof t},28578:(t,e,i)=>{i.d(e,{Z:()=>a});const a=t=>null!=t&&t.length>0},81729:(t,e,i)=>{i.d(e,{Z:()=>M});var a=i(2991),n=i.n(a),o=i(78914),s=i.n(o),r=i(86902),l=i.n(r),d=i(20629),c=i(11429),u=i(19017),h=i(3271),p=i(99741),m=i(90891),v=i(31238),g=i.n(v),y=i(78580),f=i.n(y),D=i(87926),P=i(77149),S=i.n(P),C=i(81643),I=i.n(C),k=i(94473),w=i.n(k);const x=t=>{const e={canBeFixed:!1,features:{orientation:"",format:"",width:"",height:""}},i=n()(t).call(t,(t=>t.label.en));let a=!1,o=!1,s=!1;const r=["Printing Orientation","Orientation"];if(S()(r).call(r,(t=>(I()(i).call(i,t)>=0&&(e.features.orientation=t,s=!0),s))),s){1===w()(t).call(t,(t=>t.label.en===e.features.orientation)).value.value.length&&(s=!1)}if(s){const t=["Sticker Cut Shape","Format","Size","Model"];if(S()(t).call(t,(t=>(I()(i).call(i,t)>=0&&(e.features.format=t,a=!0),a))),a){const t=["","Wall ","Custom ","Trim ","Finished ","Decoration Location ","Assembled Product ","Page Finished "];S()(t).call(t,(t=>(I()(i).call(i,"".concat(t,"Width"))>=0&&I()(i).call(i,"".concat(t,"Height"))>=0&&(e.features.width="".concat(t,"Width"),e.features.height="".concat(t,"Height"),o=!0),o)))}}return e.canBeFixed=s&&a&&o,e};let b={},A={};const Z=["Custom","Custom cm","Rectangle","Oval"];function F(t){var e,i,a,n,o,s;const r=null===(e=A)||void 0===e||null===(i=e.features)||void 0===i?void 0:i.width,l=null===(a=A)||void 0===a||null===(n=a.features)||void 0===n?void 0:n.height,d=null===(o=b)||void 0===o?void 0:o[r],c=null===(s=b)||void 0===s?void 0:s[l];if(d&&c){const e=g()(d),i=g()(c);if("Landscape"===t&&e<i||"Portrait"===t&&e>i)return b[A.features.width]=i,b[A.features.height]=e,!0}return!1}function T(t,e){var i,a,n;const o=null===(i=A)||void 0===i||null===(a=i.features)||void 0===a?void 0:a.orientation;if(null!==(n=b)&&void 0!==n&&n[o]){let i=b[o];if("Portrait"===i&&t>e?i="Landscape":"Landscape"===i&&t<e&&(i="Portrait"),i!==b[o])return b[o]=i,!0}return!1}var Q=i(36723),V=(i(33948),i(36384)),E=i.n(V),O=i(46684),_=i(89350),U=i(64781);const R=t=>{const e=[];return t.length>0&&s()(t).call(t,(t=>{if((0,O.Z)(t))if(null!=t&&t.increment&&0!==(0,_.Z)(t.increment)||t.minimum!==t.maximum){const i=100*t.minimum,a=100*t.maximum,n=100*t.increment;let o=i,s=Math.floor(a/n);for(;s>0&&!(o>a);)e.push(o/100),o+=n,s-=1}else e.push(t.minimum);else((0,U.Z)(t)||"number"==typeof t)&&e.push(t)})),[...new(E())(e)]},L={name:"ProductTreeValidation",props:["definition","sortedFeaturesMerchantKeys"],components:{SpinningLoader:c.Z},data(){return{initialValidation:!0,lastValidation:{},validationData:{...this.definition},validOptionsForSelection:{},validProductionTimes:{},validQuantities:{}}},computed:{...(0,d.Se)("product",["options","lastSelection","userSelection","completeSelection"]),...(0,d.Se)("dictionary",["getDictionaryVoice"]),sortedFeatures(){var t;return n()(t=this.sortedFeaturesMerchantKeys).call(t,(t=>this.options[t]),this)},orientationCustomDimensionFeatures(){return this.getOrientationCustomDimensionFeatures(this.sortedFeatures)}},methods:{fixCustomFormatSelection:function(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;b=e,A=a,(0,D.Z)(A)&&(A=x(i));let n=!1;var o;if(A.canBeFixed&&(null!==(o=b)&&void 0!==o&&o[A.features.format]&&f()(Z).call(Z,b[A.features.format])))if(null!=t&&t[A.features.orientation])n=F(t[A.features.orientation]);else if(null!=t&&t[A.features.width]||null!=t&&t[A.features.height]){n=T(g()(b[A.features.width]),g()(b[A.features.height]))}return{selectionFixed:n,userSelection:b}},getOptionFromSelectionKey:Q.Z,getOrientationCustomDimensionFeatures:x,getAvailableValuesFromRanges:R,validateSelection(){document.activeElement.blur(),this.$store.dispatch("product/setInputFocused",!1),this.$store.dispatch("product/setValidationPending",!0),this.$emit("changeValidationStatus","started"),this.validate().then((t=>{var e;(0,h.Z)(t)||"failure"===t.status?null!==(e=t.data)&&void 0!==e&&e.message?u.Z.error("Validation Error",t.data.message):u.Z.error("Validation Error",t):this.computeResponse(t).then((t=>{this.$store.dispatch("product/updateSelections",{selections:t,complete:!0}),this.$emit("changeValidOptions",this.validOptionsForSelection)}))}))},async validate(){return this.validationData.configuration=this.userSelection,axios.post("/product/validate-selection/",this.validationData).then((t=>(0,h.Z)(t.data)||(0,p.Z)(t.data.configuration)?t.data:t.data.configuration)).catch((()=>({})))},async computeResponse(t){const{validOptionsForFeature:e,validSelection:i}=this.getValidSelectionAndOptions(t);return this.validOptionsForSelection=e,i},getValidSelectionAndOptions(t){var e;const i={},a={};return s()(e=l()(t)).call(e,(e=>{if("isValid"!==e){const n=t[e];if("Quantity"===e){const t={type:n.type};"listOfRanges"===t.type?t.attributeRanges=n.availableOptions:"listOfValues"===t.type&&(t.attributeValues=n.availableOptions),this.validQuantities=t}else if("Production Time"===e)this.validProductionTimes=R(n.availableOptions);else{const t=this.getOptionFromSelectionKey(this.options,e).name;a[e]=n.selected,i[t]=n.availableOptions}}})),{validOptionsForFeature:i,validSelection:a}}},watch:{lastSelection:(0,m.Z)((function(t){const{selectionFixed:e,userSelection:i}=this.fixCustomFormatSelection(t,this.userSelection,this.sortedFeatures,this.orientationCustomDimensionFeatures);e?(this.$store.dispatch("product/updateSelections",{selections:i}),this.$store.dispatch("product/updateLastSelection",{[l()(i)[0]]:i[l()(i)[0]]})):this.validateSelection()}),500),completeSelection(){if(!(0,h.Z)(this.completeSelection)&&(this.$store.dispatch("product/updateValidDatas",{mcpAttributes:this.userSelection,validProductionTimes:this.validProductionTimes,validQuantities:this.validQuantities}),this.$store.dispatch("product/setValidationPending",!1),this.$emit("changeValidationStatus","success"),this.initialValidation)){this.initialValidation=!1;const t=new Event("validationSuccess");document.body.dispatchEvent(t)}}}};const M=(0,i(51900).Z)(L,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:!t.initialValidation,expression:"!initialValidation"}]},[t._t("features")],2)}),[],!1,null,null,null).exports},25521:(t,e,i)=>{i.d(e,{Z:()=>N});i(33948),i(15306);var a=i(98926),n=i.n(a),o=i(86902),s=i.n(o),r=i(77766),l=i.n(r),d=i(78914),c=i.n(d),u=i(3649),h=i.n(u),p=i(78580),m=i.n(p),v=i(20116),g=i.n(v),y=i(2991),f=i.n(y),D=i(31238),P=i.n(D),S=i(41511),C=i.n(S),I=i(20629),k=i(48383),w=i(19017),x=i(89350),b=i(3271),A=i(40989),Z=i(11914),F=i(32366),T=i.n(F),Q=i(89872),V=i(11418),E=i(98271);var O=i(51486),_=i(55445),U=i(7072),R=i(37738),L=i(11294);const M=async(t,e,i,a,n)=>{const o={...t,quantities:[n],debug:!1,validProductionTimes:[i],priorities:[{productionTime:i,deliveryOption:e,speed:a}]};delete o.prioritySets,w.Z.log("Quoting single price",e,i,a,n);const s=await axios.post("/product/quote/",o);if(w.Z.log("Response single price quote",s.data),"failure"===s.data.status||(0,b.Z)(s.data.records))return w.Z.log("No prices for",e,i,a,n),null;{var r,d;const t=s.data.records[n][l()(r=l()(d="".concat(a,"-")).call(d,i,"-")).call(r,e)],o=(0,L.Z)(t,1);return{price:t.amount,discountedPrice:null==o?void 0:o.amount,promocode:null==o?void 0:o.promocode,currencyCode:t.currencyCode}}},$={name:"ProductBaseComponent",mixins:[U.Z],data(){var t,e,i,a,o,s;return{validationDefinition:!1,openInputError:{},customQuantity:null!==(t=this.productData)&&void 0!==t&&null!==(e=t.quantities)&&void 0!==e&&e.defaultValue&&!n()(this.productData.quantities.defaultValue)?(0,x.Z)(this.productData.quantities.defaultValue):0,visibleQuantities:[],initialQuantities:[],validOptionsByMerchantFeature:{},customProductConfiguration:!1,addedItemId:"",validationStatus:"",validating:!1,firstValidationComplete:!1,validationStep:"before-first-validation",isAddingToCart:!1,firstAddToCart:!1,relativePath:window.location.pathname,dexOptionClicked:!1,selectedDesignService:"",cartMaxJobsNumber:15,forceFallbackMethodUsageForDeliveryDate:!1,isGalleryTemplate:!1,pageId:window.pageId,pageIdLegacy:window.pageIdLegacy,recommendationId:null!==(i=null===(a=this.productData)||void 0===a?void 0:a.recommendationId)&&void 0!==i?i:"",recommendationAnalyticsId:null!==(o=null===(s=this.productData)||void 0===s?void 0:s.recommendationAnalyticsId)&&void 0!==o?o:"",currentUpSellProductRecommendation:{},itemUpsellData:{},isUpsellAdding:!1,isUpsellFileCheck:!1,checkDesignTemplatesDone:!1,isMultiartworkActive:!1,watchCustomQuantity:!0,forceMultiArtworkValidation:!1}},computed:{firstValidationLoading(){return"before-first-validation"===this.validationStep||"first-validation-started"===this.validationStep},shouldShowProductFeatures(){return"first-validation-success"===this.validationStep||"any-other-validation"===this.validationStep},shouldShowValidationOverlay(){return"any-other-validation"===this.validationStep&&(this.validating||this.fetchingTemplates)},discountedPriceExists(){return!(0,b.Z)(this.selectedDiscountedPrice)},fileCheckAmount(){return this.fileCheckValue&&this.fileCheck?this.fileCheckValue:0},designServiceAmount(){var t,e,i,a;return(0,b.Z)(this.designServiceSelected)?0:"edit"===this.designServiceSelected?null===(t=this.designService)||void 0===t||null===(e=t.prices)||void 0===e?void 0:e.edit:null===(i=this.designService)||void 0===i||null===(a=i.prices)||void 0===a?void 0:a.creation},productBasePrice(){return this.discountedPriceExists?this.selectedDiscountedPrice:this.selectedPrice},productPriceTaxFree(){var t;const e=this.productBasePrice,{amount:i,currencyCode:a}=e;return{amount:i+(0,x.Z)(this.fileCheckAmount)+Number(null===(t=this.designServiceAmount)||void 0===t?void 0:t.toFixed(2)),currencyCode:a}},vatPrice(){const{amount:t,currencyCode:e}=this.productPriceTaxFree;let i=0;return this.taxRate&&0!==(0,x.Z)(this.taxRate.toString())&&(i=t/100*this.taxRate),{amount:Number(i.toFixed(2)),currencyCode:e}},productPriceAllTaxIncluded(){const{amount:t,currencyCode:e}=this.productPriceTaxFree;return{amount:t+this.vatPrice.amount,currencyCode:e}},isDesignExperienceEnabled(){var t;let e=!(0,b.Z)(null===(t=this.productData)||void 0===t?void 0:t.designExperience);return(0,b.Z)(this.userSelection.DesignExperience)||"false"!==this.userSelection.DesignExperience||(e=!1),e},showArtworkSelectionGallery(){return this.hasTemplateDesign},enabledArtworkOptions(){var t;let e=["upload"];return this.isDesignExperienceEnabled&&(e=[...e,"design-stack"],this.showArtworkSelectionGallery&&!this.isEditView&&(e=[...e,"design-gallery"])),null!==(t=this.designService)&&void 0!==t&&t.isActive&&(e=[...e,"design-service"]),e},sortedFeaturesMerchantKeys(){return this.getSortedKeysByValue(this.options,["customSelections","sortIndex"])},customQuantityInRange(){const t=!this.minQuantity||this.customQuantity>=this.minQuantity,e=!this.maxQuantity||this.customQuantity<=this.maxQuantity;return t&&e},minQuantity(){return this.productData.quantities.min},maxQuantity(){return this.productData.quantities.max},hasOpenInput(){var t,e;return"free"===(null===(t=this.productData)||void 0===t||null===(e=t.quantities)||void 0===e?void 0:e.mode)},hasOpenInputError(){return!0===this.openInputError.hasError},gridDataLoaded(){return Boolean(this.prices&&s()(this.prices).length>0)},selectionIsValid(){return!1===this.hasOpenInputError&&!1===this.hasFeatureInputError},instructionFile(){var t;return this.hasInstructions?null===(t=this.productData)||void 0===t?void 0:t.instructionFile:{}},templateEnabled(){return!1===this.productData.templateDisabled},hasInstructions(){var t,e;return!(null===(t=this.productData)||void 0===t||!t.instructionFile)&&(0,A.Z)(null===(e=this.productData)||void 0===e?void 0:e.instructionFile)>0},addToCartParams(){var t,e,i,a,n,o,s,r,l,d,c,u,h,p,m,v,g,y,f,D,P,S,C,I,k,w,x,b,A,Z;return{artworkOption:null!==(t=this.artworkOption)&&void 0!==t?t:"",documentReferenceUrl:null!==(e=this.documentReferenceUrl)&&void 0!==e?e:"",hasTemplates:null!==(i=this.hasTemplates)&&void 0!==i&&i,templateSelectedAsset:this.templateSelectedAsset,collectionId:null!==(a=this.collectionId)&&void 0!==a?a:"",options:null!==(n=this.options)&&void 0!==n?n:{},productData:null!==(o=this.productData)&&void 0!==o?o:{},merchantProductName:null!==(s=this.merchantProductName)&&void 0!==s?s:"",pageId:null!==(r=this.merchantProductId)&&void 0!==r?r:"",pageIdLegacy:null!==(l=this.pageIdLegacy)&&void 0!==l?l:"",data:null!==(d=this.data)&&void 0!==d?d:{},userSelection:null!==(c=this.userSelection)&&void 0!==c?c:{},mcpSku:null!==(u=this.mcpSku)&&void 0!==u?u:"",selectedPrice:null!==(h=this.selectedPrice)&&void 0!==h?h:{},selectedQuantity:null!==(p=this.selectedQuantity)&&void 0!==p?p:0,fileCheck:this.fileCheck||!1,fileCheckValue:this.fileCheck?this.fileCheckValue:0,isUpsellFileCheck:this.fileCheck&&this.isUpsellFileCheck,customName:null!==(m=this.customName)&&void 0!==m?m:"",dates:null!==(v=this.dates)&&void 0!==v?v:{},taxRate:null!==(g=this.taxRate)&&void 0!==g?g:0,hts:null!==(y=this.hts)&&void 0!==y?y:"",instructionFile:null!==(f=this.instructionFile)&&void 0!==f?f:{},aluqid:null!==(D=this.aluqid)&&void 0!==D?D:"",algoliaobjectid:null!==(P=this.algoliaobjectid)&&void 0!==P?P:"",isDesignExperienceEnabled:null!==(S=this.isDesignExperienceEnabled)&&void 0!==S&&S,selectedDiscountedPrice:null!==(C=this.selectedDiscountedPrice)&&void 0!==C?C:{},selectedDesignService:null!==(I=this.selectedDesignService)&&void 0!==I?I:"",designServiceSelected:this.designServiceSelected,selectedArtworkBox:null!==(k=this.buttonActiveId)&&void 0!==k?k:null,productPageUrl:null!==(w=this.relativePath)&&void 0!==w?w:"",selectedDesignTemplate:this.selectedDesignTemplate,artworkFromTemplate:this.artworkFromTemplate,deliveryDateWithFallback:this.deliveryDateWithFallback,productRecommenderIds:{recommendationId:null!==(x=this.recommendationId)&&void 0!==x?x:"",recommendationAnalyticsId:null!==(b=this.recommendationAnalyticsId)&&void 0!==b?b:""},experimentData:null!==(A=this.experimentData)&&void 0!==A?A:[],mcpFulfillmentAttributes:null!==(Z=this.mcpFulfillmentAttributes)&&void 0!==Z?Z:[]}},eventTrackingData(){var t,e,i,a,n;return{merchantProductId:this.merchantProductId,merchantProductName:this.merchantProductName,selectedQuantity:this.selectedQuantity,selectedPrice:this.selectedPrice,productAmountTaxFree:this.productPriceTaxFree.amount,productAmountAllTaxIncluded:this.productPriceAllTaxIncluded.amount,productCurrency:this.currency,recommendationId:null!==(t=null===(e=this.productData)||void 0===e?void 0:e.recommendationId)&&void 0!==t?t:"",recommendationAnalyticsId:null!==(i=null===(a=this.productData)||void 0===a?void 0:a.recommendationAnalyticsId)&&void 0!==i?i:"",experimentData:null!==(n=this.experimentData)&&void 0!==n?n:[]}},dexData(){return{mcpSku:this.mcpSku,attributes:this.userSelection}},isPriceLimitExceed(){let t=!1;const{amount:e}=this.productPriceAllTaxIncluded;return"EUR"===this.currency&&e>=1e5&&(t=!0),"GBP"===this.currency&&e>=9e4&&(t=!0),"CHF"===this.currency&&e>=11e4&&(t=!0),t},jobId(){return this.isEditView?this.customProductConfiguration.id:this.addedItemId},documentPreferences(){var t,e;return null!==(t=null===(e=this.customProductConfiguration)||void 0===e?void 0:e.documentPreferences)&&void 0!==t?t:{}},dexButtonDisabled(){return this.dexOptionClicked||this.datesRequestPending},isValidCustomQuantity(){return this.isValidQuantity(this.customQuantity)},...(0,I.Se)("product",["options","data","mcpSku","userSelection","merchantProductName","merchantProductId","h1Title","documentReferenceUrl","artworkOption","designServiceSelected","selectedDesignTemplate","mcpFulfillmentAttributes","multiArtworkDetails","hasMultiArtworkDetails"]),...(0,I.Se)("prices",["dates","selectedPrice","selectedQuantity","selectedDiscountedPrice","taxRate","hts","datesRequestPending","priceRequestPending","deliveryDateWithFallback","pricingRequest"]),...(0,I.Se)("links",["dexFromProductLink","designTemplateGalleryLink"]),...(0,I.Se)("cart",["allJobsCount","totalAmountAllTaxIncluded","currency"]),...(0,I.Se)("dictionary",["getDictionaryVoice","dictionaryVoiceExists","voicesLoaded"]),...(0,I.Se)("templates",["hasTemplateDesign","fallbackProductConfiguration"]),...(0,I.Se)("experience",["experimentData","getVariation"])},methods:{getSortedKeysByValue:Z.Z,createJobPayload:t=>{var e,i,a,n;let{artworkOption:o,documentReferenceUrl:s,hasTemplates:r=!1,templateSelectedAsset:l={},collectionId:d,options:c={},productData:u={},merchantProductName:h="",pageId:p="",pageIdLegacy:m="",data:v={},userSelection:g={},mcpSku:y="",selectedPrice:f={},selectedQuantity:D=0,fileCheck:P=!1,fileCheckValue:S=0,isUpsellFileCheck:C=!1,customName:I="",dates:k={},taxRate:w=0,hts:x="",instructionFile:A={},aluqid:Z="",algoliaobjectid:F="",isDesignExperienceEnabled:O=!1,selectedDiscountedPrice:_={},selectedDesignService:U="",selectedArtworkBox:R="",productPageUrl:L="",selectedDesignTemplate:M,artworkFromTemplate:$,deliveryDateWithFallback:q,productRecommenderIds:N={},experimentData:B=[],upsellPriceDelta:j=0,upsellQuantityDelta:G=0,mcpFulfillmentAttributes:K=[]}=t;const W=T()(e=(0,Q.Z)(c)).call(e,((t,e)=>{const i=c[e];return t[i.label.en]=(0,E.Z)(i),t}),{}),J=(0,V.Z)(c),H=null!==(i=null==k?void 0:k[f.deliveryKey])&&void 0!==i?i:"";let z={},X="upload"!==(null==o?void 0:o.toString())?s:null;if(r){const{udsUrl:t,id:e,name:i,isCustom:a,previewUrl:n,templateId:o,gallery:s,defaultScene:r}=l;z={url:t,id:e,name:i,isCustom:a,previewUrl:n,templateId:o,collectionId:d,defaultScene:r,gallery:s},X||a||(X=t)}const Y={product:{prodId:u.ctoolsId,sku:v.productId,prodName:h,attributes:g,fulfillerBundle:{items:[{sku:y,productId:v.productId,productKey:v.productId,productName:h,attributes:g,backboneAttributes:v.attributes}]}},priceInfo:f.info,template:z,quantity:D,fileCheck:!!P,fileCheckValue:S,custom_name:null!=I?I:"",selectedPriority:H,promisedDate:H,totalPrice:f.amount,taxRate:w,hts:x,merchantInfo:{pageId:p,pageIdLegacy:m,productConfigurationId:u.configurationId,merchantProductName:h,productFamily:u.productFamily,productGroup:u.productGroup,productPageTitle:u.productPageTitle,merchantSku:v.productId,merchantVar:v.productVar,fscCertified:u.fscCertified,instructionFileUrl:null==A?void 0:A.url,attributesData:J,selectedAttributes:W,fileFlow:u.fileFlow,aluqid:null!=Z?Z:"",algoliaobjectid:null!=F?F:"",productPageUrl:L,recommendationId:null==N?void 0:N.recommendationId,recommendationAnalyticsId:null==N?void 0:N.recommendationAnalyticsId,isUpsellFileCheck:C,deliveryDateWithFallback:q,page_experience_customization_data:[{experiment_data:B}],upsellPriceDelta:null!=j?j:0,upsellQuantityDelta:null!=G?G:0,printDexExtendedOptions:null!==(a=null==u?void 0:u.printDexExtendedOptions)&&void 0!==a?a:[],printDexExtendedOptionsParameter:null!==(n=null==u?void 0:u.printDexExtendedOptionsParameter)&&void 0!==n?n:void 0},documentReferenceUrl:X,artworkOption:o,artworkSource:X||o?"product-page":null,selectedArtworkBox:R,selectedDesignTemplate:M,artworkFromTemplate:$,mcpFulfillmentAttributes:K};return O&&(Y.merchantInfo.dexEnabled=!0,Y.merchantInfo.designExperience=u.designExperience),(0,b.Z)(_)||(Y.promocode_id=_.id,Y.promocode=_.promocode),""!==U&&(Y.designService={type:U,pageSource:"product-page",product:y}),Y},extractValidQuantityRange(){var t,e;let{minLimit:i,maxLimit:a}=(0,O.Z)(null!==(t=null===(e=this.data.validQuantities)||void 0===e?void 0:e.attributeRanges)&&void 0!==t?t:[]);return(!i||this.minQuantity>i)&&(i=this.minQuantity),(!a||this.maxQuantity<a)&&(a=this.maxQuantity),[i,a]},loadValidationDefinition(){var t,e,i,a,n;"completed"===(null===(t=this.productData)||void 0===t||null===(e=t.configurationGraph)||void 0===e||null===(i=e.checkValidationData)||void 0===i?void 0:i.status)&&(this.validationDefinition=null===(a=this.productData.configurationGraph)||void 0===a?void 0:a.payload,this.validationDefinition.version=null===(n=this.productData.configurationGraph)||void 0===n?void 0:n.version)},isValidQuantity(t){return(0,_.Z)([t],this.data.validQuantities).length>0},onValidationStatusChanged(t){this.validationStatus=t,"started"===this.validationStatus&&(this.validating=!0,this.firstValidationComplete?this.validationStep="any-other-validation":this.validationStep="first-validation-started"),"success"===this.validationStatus&&(this.loadPrices("validation"),this.validating=!1,this.firstValidationComplete||(this.validationStep="first-validation-success",this.firstValidationComplete=!0))},validateQuantityOpenInput(t){let e={hasError:!1,errorMessage:""};if(!this.isValidQuantity(t)){const[i,a]=this.extractValidQuantityRange();let n="";if(this.dictionaryVoiceExists("product","error_custom_quantity")&&(n=this.getDictionaryVoice("product","error_custom_quantity").replace("#QUANTITY#",t)),t<i||t>a){const t=this.getDictionaryVoice("product","error_custom_quantity_range").replace("#MIN#",i).replace("#MAX#",a);n=l()(n).call(n," ".concat(t))}e={hasError:!0,errorMessage:n}}return e},customQuantityOpenInputError(){this.openInputError=this.validateQuantityOpenInput(this.customQuantity)},filterInitialQuantities(){var t;let e=this.initialQuantities;if(this.hasOpenInput){var i;let t=[],a=[];if(c()(i=this.initialQuantities).call(i,(e=>{e<this.customQuantity?t.push(e):e>this.customQuantity&&a.push(e)})),this.lowerSlots<t.length){const e=t.length-this.lowerSlots;t=h()(t).call(t,e)}this.higherSlots<a.length&&(a=h()(a).call(a,0,this.higherSlots)),e=l()(t).call(t,a)}var a;null!==(t=e)&&void 0!==t&&m()(t).call(t,(0,x.Z)(this.customQuantity))||(e=l()(a=[(0,x.Z)(this.customQuantity)]).call(a,e));return e},setCustomQuantity(t){this.watchCustomQuantity=!1,this.customQuantity=t},loadQuantities(){var t,e,i,a,o,s;this.initialQuantities=null===(t=this.productData)||void 0===t||null===(e=t.quantities)||void 0===e||null===(i=e.list)||void 0===i?void 0:g()(a=f()(i).call(i,(t=>(0,x.Z)(t)))).call(a,(t=>0!==t));const r=null===(o=this.productData)||void 0===o||null===(s=o.quantities)||void 0===s?void 0:s.defaultValue;var l,d,c,u,h,p,v,y;(r&&!n()(r)&&(this.customQuantity=(0,x.Z)(r)),this.hasOpenInput)&&(this.lowerSlots=(0,x.Z)(null!==(l=null===(d=this.productData)||void 0===d||null===(c=d.quantities)||void 0===c||null===(u=c.hints)||void 0===u?void 0:u.lower)&&void 0!==l?l:0),this.higherSlots=(0,x.Z)(null!==(h=null===(p=this.productData)||void 0===p||null===(v=p.quantities)||void 0===v||null===(y=v.hints)||void 0===y?void 0:y.higher)&&void 0!==h?h:0));if(this.isEditView||this.isCustomConfig||this.isLossLeader||this.isGalleryTemplate){var D;let t;this.isEditView||this.isLossLeader||this.isGalleryTemplate?t=(0,x.Z)(this.customProductConfiguration.quantity):this.isCustomConfig&&(t=(0,x.Z)(this.customConfigItem.quantity)),this.initialQuantities.length>0&&!m()(D=this.initialQuantities).call(D,t)&&this.initialQuantities.push(t),(this.hasOpenInput||this.isGalleryTemplate)&&t!==this.customQuantity&&(this.customQuantity=t)}},getMultiArtworkSetsCount(){var t;return null!==(t=this.data)&&void 0!==t&&t.mcpAttributes&&"Sets"in this.data.mcpAttributes?this.data.mcpAttributes.Sets:0},getMinimumPurchasableQuantity(){const t=this.getMultiArtworkSetsCount(),[e]=this.extractValidQuantityRange();return this.isMultiartworkActive?t*e:e},loadPrices(t){const e=this.getMinimumPurchasableQuantity();if(this.hasOpenInput){if(!this.isValidCustomQuantity)return void this.customQuantityOpenInputError();this.visibleQuantities=this.filterInitialQuantities(),this.customQuantity<e&&this.setCustomQuantity(e)}if("success"===this.validationStatus){var i;const a=null!==(i=this.canDisplayProFileCheck)&&void 0!==i&&i;this.$store.dispatch("prices/getPrices",{data:this.data,initialQuantities:this.visibleQuantities,customQuantity:this.customQuantity,source:t||"",defaultDeliveryKey:this.defaultDeliveryKey,shouldRequestServiceQuote:a,minimalPurchasableQuantity:e}),"zipCode"===t&&(0,k.Z)("postal_code_prices_update","ga_event",{type:"Verifica CAP",action:"Griglia aggiornata con CAP",label:this.merchantProductName})}},showCartLimitModal(){this.$bvModal.show("modal-cart-limit")},showCartLimitExceedModal(){this.$bvModal.show("modal-cart-limit-exceed")},checkLimits(){return!this.isLossLeader&&!this.isEditView&&this.allJobsCount>=this.cartMaxJobsNumber?(this.showCartLimitModal(),!1):this.isPriceLimitExceed?(this.showCartLimitExceedModal(),!1):!(this.isMultiartworkActive&&!this.checkMultiArtwork())},async prepareItemUpsell(){var t,e,i,a,n,o,s;this.currentUpSellProductRecommendation=await async function(t,e,i,a,n,o,s,r,l,d){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,h="";try{var p,m,v;h=null!==(p=null===(m=window.analytics)||void 0===m||null===(v=m.user())||void 0===v?void 0:v.anonymousId())&&void 0!==p?p:""}catch(t){w.Z.warn(t)}try{var g;const p=await(0,R.Z)(h,t,[e],i,!0,n,o,s,c,d,"PUBLISHED",u),m=null==p||null===(g=p.upSell)||void 0===g?void 0:g.tableBased;if(w.Z.log("The upSellRecommendation is",m),null!=m&&m.upsellQuantity){const t=await M(l,s,o,r,m.upsellQuantity);w.Z.log("The upsell price is",t);let e={};if(t){var y;const i=(null!==(y=t.discountedPrice)&&void 0!==y?y:t.price)-a;i>0&&(w.Z.log("The upsellNetPriceDelta is",i),e={upsellQuantity:null==m?void 0:m.upsellQuantity,upsellNetPrice:t.price,upsellQuantityDelta:null==m?void 0:m.upsellQuantityDelta,upsellNetPriceDelta:i,upsellPromocode:t.promocode,recommendationId:p.recommendationId,recommendationAnalyticsId:p.analyticsId})}return e}}catch(t){return w.Z.error(t),{}}}("Product Detail Page",[this.pageId],this.merchantProductId,this.productBasePrice.amount,null===(t=this.selectedPrice)||void 0===t?void 0:t.quantity,null===(e=this.selectedPrice)||void 0===e||null===(i=e.info)||void 0===i?void 0:i.productionTime,null===(a=this.selectedPrice)||void 0===a||null===(n=a.info)||void 0===n?void 0:n.deliveryOption,null===(o=this.selectedPrice)||void 0===o||null===(s=o.info)||void 0===s?void 0:s.speed,this.data,this.pricingRequest,0,"Upsell MVP Labels")},async onAddToCartClick(){if(!this.checkLimits())return;const t=this.createJobPayload(this.addToCartParams);this.isAddingToCart=!0,this.currentUpSellProductRecommendation={},this.isProductEligibleForUpsell&&!this.hasMultiArtworkDetails&&await this.prepareItemUpsell(),this.addToCart(t,this.eventTrackingData)},resetAfterCartAddOrUpdate(){var t;(this.$store.dispatch("product/setDocumentReferenceUrl",null),this.$store.dispatch("product/setArtworkOption",null),this.hasTemplates)&&(this.$store.dispatch("product/setCustomTemplateUds",{}),null===(t=this.$refs["features-list"])||void 0===t||t.forceTemplatesAssetsRefresh());this.reset()},onGetCustomConfigUrlClick(t){this.validating=!0;const e=this.createJobPayload(this.addToCartParams);axios.post("/product/get-custom-config-url/",{item:e,customUrlParams:t},{headers:{"Content-Type":"application/json"}}).then((t=>{w.Z.log("response get custom config url",t),200===t.status&&(this.customConfigResponse=t.data,this.validating=!1)})).catch((t=>{w.Z.log(t,"ajax ko"),this.customConfigResponse=t.response.data,this.validating=!1}))},onUpdateJobClick(t){if(!this.checkLimits())return;this.isEditView?this.isAddingToCart=!0:this.isUpdatingFileCheck=!0;const e=this.createJobPayload(this.addToCartParams);var i,a,n,o,s;this.isUpsellAdding&&this.itemUpsellData&&(e.quantity=this.itemUpsellData.upsellQuantity,e.totalPrice=this.itemUpsellData.upsellNetPrice,e.promocode=null!==(i=this.itemUpsellData.upsellPromocode)&&void 0!==i?i:void 0,e.promocode_id=null!==(a=null===(n=this.itemUpsellData.upsellPromocode)||void 0===n?void 0:n.promocodeId)&&void 0!==a?a:void 0,e.merchantInfo.recommendationId=this.itemUpsellData.recommendationId,e.merchantInfo.recommendationAnalyticsId=this.itemUpsellData.recommendationAnalyticsId,e.merchantInfo.upsellQuantityDelta=null!==(o=this.itemUpsellData.upsellQuantityDelta)&&void 0!==o?o:0,e.merchantInfo.upsellPriceDelta=P()((null!==(s=this.itemUpsellData.upsellNetPriceDelta)&&void 0!==s?s:0).toFixed(2)));w.Z.log("upsell qty delta: ",e.merchantInfo.upsellQuantityDelta),w.Z.log("upsell price delta: ",e.merchantInfo.upsellPriceDelta),this.updateJob(this.jobId,e,t)},shouldOpenGalleryLink(t){return!this.isEditView&&(!!this.showArtworkSelectionGallery&&"design-gallery"===t)},async openPrintDex(){var t,e,i,a;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this.dexButtonDisabled||!this.checkDesignTemplatesDone)return;if(this.dexOptionClicked=!0,!this.checkLimits())return;await this.$store.dispatch("product/setArtworkOption","design-stack");const o={payload:this.createJobPayload(this.addToCartParams),eventTrackingData:this.eventTrackingData,dexData:this.dexData,relativePath:this.relativePath,templateSelectedAsset:null!==(t=this.templateSelectedAsset)&&void 0!==t?t:void 0,fileCheckValue:null!==(e=this.fileCheckValue)&&void 0!==e?e:0,hasFileCheck:null!==(i=this.hasFileCheck)&&void 0!==i&&i,isEditView:this.isEditView,dates:this.dates,taxRate:this.taxRate};var s,r;this.isEditView&&(o.jobId=this.jobId,o.payload.selectedDesignTemplate=null===(s=this.documentPreferences)||void 0===s?void 0:s.selectedDesignTemplate,o.payload.artworkFromTemplate=null===(r=this.documentPreferences)||void 0===r?void 0:r.artworkFromTemplate);let d;this.fallbackProductConfiguration&&(o.designBrowserDefaultPayload=this.fallbackProductConfiguration),w.Z.log(o),(0,k.Z)("Designer Open","ga_event",{type:"designer upload",action:"Product page - Designer open",label:this.merchantProductId,NonInteraction:!1}),(0,k.Z)("designer open","ga4_event",{action:"designer_open",additional_params:[{flow_designer:"product"},{product_designer:this.merchantProductId}]}),d=this.shouldOpenGalleryLink(n)?this.designTemplateGalleryLink:this.dexFromProductLink,(0,k.Z)("Designer Open","designer_open",{event_target_URL:l()(a="".concat(window.location.origin)).call(a,d)}),axios.post("/product/get-dex-page-url/",{dexBundle:o},{headers:{"Content-Type":"application/json"}}).then((t=>{var e;(w.Z.log("response get dex page url",t.data),200===t.status&&t.data.success)?(w.Z.log("hasTemplates",this.hasTemplateDesign),window.location.href=l()(e="".concat(d,"?bundle-key=")).call(e,t.data.bundleKey)):w.Z.error("dex page url failure",t.data)})).catch((t=>{w.Z.error(t,"ajax ko",t)}))},openDesignService(){var t;this.fileCheck=!1,null!==(t=this.designService)&&void 0!==t&&t.isActive&&(this.selectedDesignService="creation"),this.$store.dispatch("product/setDesignServiceSelected","creation");const e=this.designServiceAmount;this.$store.dispatch("product/setDesignServiceValue",e)},initProductSetup(){var t,e;this.visibleQuantities=this.filterInitialQuantities();const i=!this.isLossLeader&&!0===(null===(t=this.productData)||void 0===t||null===(e=t.fileFlow)||void 0===e?void 0:e.fileCheck),a=!this.isLossLeader&&this.productServices&&this.productServices.file_check?this.productServices.file_check:0;this.$store.dispatch("product/setInitialOptions",{productData:this.productData,merchantProductId:this.pageId}),this.$store.dispatch("prices/setServicesOptions",{fileCheckValue:a,hasFileCheck:i})},onClearDesignServiceSelection(){this.updateDesignServiceValue("")},async updateDesignServiceValue(t){this.selectedDesignService=t,this.fileCheck=!1,await this.$store.dispatch("product/setDesignServiceSelected",t),"design-service"===this.artworkOption&&""===t?await this.$store.dispatch("product/setArtworkOption",null):""!==t&&await this.$store.dispatch("product/setArtworkOption","design-service");const e=this.designServiceAmount;await this.$store.dispatch("product/setDesignServiceValue",e)},async onSelectDesignService(t){await this.updateDesignServiceValue(t);let e="File Edits & Recreation chosen";"creation"===t&&(e="File Design from Scratch chosen"),(0,k.Z)("design care - type of service","ga_event",{type:"design care - type of service",action:"from product page",label:e})},onAddOrSubtractUpSellQuantity(t,e){this.checkLimits()&&(this.isUpsellAdding=t,this.itemUpsellData=e)},designBrowserProductPayload(t){const{productId:e,productVar:i}=this.data;let a=this.selectedQuantity;void 0!==a&&0!==a||(a=this.customQuantity?this.customQuantity:0);let n=24;return C()(this.data.validProductionTimes)&&this.data.validProductionTimes.length>0&&([n]=this.data.validProductionTimes),{product:{mcpSku:this.mcpSku,productPageId:window.pageId,productConfigurationId:this.productData.configurationId,productName:this.productName,merchantProductName:this.merchantProductName,productSku:e,variant:i},variables:{...t,"Production Time":n,Quantity:a}}},async checkDesignTemplates(){const t=this.designBrowserProductPayload(this.userSelection),e=await axios.post("/has-design-templates",t);e&&200===e.status&&(await this.$store.dispatch("templates/setHasTemplateDesign",e.data["has-templates-enabled"]),this.hasTemplateDesign&&!this.isEditView&&"any-other-validation"!==this.validationStep&&void 0===this.designServiceSelected&&(this.buttonActiveId="design-stack"),this.checkDesignTemplatesDone=!0)},onMultiArtworkDeactivate(){this.onMultiArtworkInputError(!1),this.isMultiartworkActive=!1,this.$store.dispatch("product/setMultiArtworkDetails",{variants:[]})},onMultiArtworkInputError(t){this.hasMultiArtworkInputError=t,t||(this.forceMultiArtworkValidation=t)}},watch:{forceFallbackMethodUsageForDeliveryDate(t){this.$store.dispatch("prices/setFallbackModeForDateCalculation",{useFallback:t}),this.loadPrices()}}},q=$;const N=(0,i(51900).Z)(q,undefined,undefined,!1,null,null,null).exports},7072:(t,e,i)=>{i.d(e,{Z:()=>c});var a=i(19017),n=i(48383),o=i(3271),s=i(28578),r=i(85835),l=i(41730);const d={name:"ProductHandler",props:{isProductEligibleForUpsell:{type:Boolean,required:!1}},data:()=>({addToCartUrl:"/cart/add/",updateUrl:"/cart/update/"}),methods:{updateProductRecommenderMetrics:l.Z,updateJob(t,e,i){this.validating=!0,this.firstAddToCart=!0,axios.post(this.updateUrl,{lineItemId:t,datas:e},{headers:{"Content-Type":"application/json"}}).then((t=>{var e,n;(a.Z.log("response",t),200===t.status&&t.data&&!(0,o.Z)(t.data.shopping_cart))?(this.$store.dispatch("cart/update",{cart:null!==(e=null==t||null===(n=t.data)||void 0===n?void 0:n.shopping_cart)&&void 0!==e?e:{}}),void 0!==i&&""!==i&&(window.location.href=i)):r.Z.$emit("open-modal-generic-error");this.resetAfterCartAddOrUpdate()})).catch((t=>{a.Z.log(t,"ajax ko"),r.Z.$emit("open-modal-generic-error"),this.resetAfterCartAddOrUpdate()}))},addToCart(t,e){this.firstAddToCart=!0,this.isAddingToCart=!0,this.validating=!0,axios.post(this.addToCartUrl,t,{headers:{"Content-Type":"application/json"}}).then((t=>{if(200===t.status){var i;if(t.data&&null!==(i=t.data)&&void 0!==i&&i.shopping_cart){var a;const i=t.data.shopping_cart;if(e){var o,l;const{merchantProductId:t,merchantProductName:i,selectedQuantity:a,selectedPrice:r,productAmountTaxFree:d,productAmountAllTaxIncluded:c,productCurrency:u,recommendationId:h,recommendationAnalyticsId:p,experimentData:m}=e;(0,n.Z)("Add To Cart Completed","add_to_cart",{add_product_id:t,add_product_name:i,add_product_unitprice_tf:d,add_product_unitprice_ati:c,add_product_quantity:a,add_product_currency_conversion:null==r||null===(o=r.info)||void 0===o||null===(l=o.exchangeRate)||void 0===l?void 0:l.toFixed(2),add_product_currency:u,add_product_recommendation_id:p,add_product_experience_customization:m}),(0,s.Z)(h)&&this.updateProductRecommenderMetrics("addedToCart",h,t)}this.$store.dispatch("cart/update",{cart:i}),this.$bvModal.show("modal-add"),this.addedItemId=null!==(a=null==i?void 0:i.lastItemInserted)&&void 0!==a?a:""}else r.Z.$emit("open-modal-generic-error");this.resetAfterCartAddOrUpdate()}})).catch((t=>{a.Z.log(t,"ajax ko"),r.Z.$emit("open-modal-generic-error"),this.resetAfterCartAddOrUpdate()}))},reset(){this.isAddingToCart=!1,this.validating=!1,this.isEditView||(this.isUpdatingFileCheck=!1)},resetAfterCartAddOrUpdate(){this.reset()}}};const c=(0,i(51900).Z)(d,undefined,undefined,!1,null,null,null).exports},27682:(t,e,i)=>{i.d(e,{Z:()=>s});var a=i(5437);var n=i(92381);const o={name:"CurrencyHandler",computed:{displayReverseConversionPrice(){return this.showCurrencySelectorForDomain&&this.activeCurrency!==this.defaultCurrency&&"EUR"===this.activeCurrency},...(0,i(20629).Se)("preference",["defaultCurrency","activeCurrency","currencyExchangeRate","showCurrencySelectorForDomain"])},methods:{convertAmount(t){return function(t,e,i,a){return null!=i&&t!==e?i/a:i}(this.defaultCurrency,this.activeCurrency,t,this.currencyExchangeRate)},formatPriceWithCurrency(t){const e=this.convertAmount(t);return(0,a.Z)(e,this.activeCurrency)},formatPriceObjectWithCurrency(t){return!(0,n.Z)(t)&&!(0,n.Z)(null==t?void 0:t.amount)&&!(0,n.Z)(null==t?void 0:t.currencyCode)?this.formatPriceWithCurrency(t.amount):""},formatPriceWithCurrencyNoDecimals(t){const e=this.convertAmount(t);return(0,a.Z)(e,this.activeCurrency,!0)}}};const s=(0,i(51900).Z)(o,undefined,undefined,!1,null,null,null).exports},11429:(t,e,i)=>{i.d(e,{Z:()=>n});const a={name:"SpinningLoader",props:["isLoading"],components:{BSpinner:i(32639).X}};const n=(0,i(51900).Z)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isLoading?i("b-spinner",{attrs:{small:""}}):t._e()}),[],!1,null,"47a3d934",null).exports}}]);